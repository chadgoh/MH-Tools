!function(){function e(e,r){return e.indexOf(r)>-1}if(location.href.indexOf("mousehuntgame.com")<0)alert("You are not on mousehuntgame.com! Please try again.");else if(user){var r,t=user.environment_name,a=user.base_name,n={};n.location=t,n.weapon=user.weapon_name,n.base=a,n.charm=user.trinket_name,n.rank=(r=user.title_name).indexOf("Archduke")>=0||r.indexOf("Archduchess")>=0?"archduke":r.indexOf("Grand Duke")>=0||r.indexOf("Grand Duchess")>=0?"grandduke":r.indexOf("Duke")>=0||r.indexOf("Duchess")>=0?"duke":r.indexOf("Count")>=0||r.indexOf("Countess")>=0?"count":r.indexOf("Baron")>=0||r.indexOf("Baroness")>=0?"baron":r.indexOf("Lord")>=0||r.indexOf("Lady")>=0?"lord":r.indexOf("Journeyman")>=0||r.indexOf("Journeywoman")>=0?"journeyman":r.toLowerCase(),user.has_shield||(n.gs="No"),n.power_bonus=Math.round(100*user.trap_power_bonus);var s=document.querySelector(".campPage-trap-trapStat.luck > .value");n.total_luck=s&&s.textContent?Number(s.textContent):user.trap_luck;var i=user.bait_name,o=function(r,t){var a=user.quests,s=user.viewing_atts;if("Balack's Cove"===r){var o=s.tide;if("low"===o)return"Low Tide";if("med"===o)return"Medium Tide";if("high"===o)return"High Tide"}else{if("Burroughs Rift"===r){var u=a.QuestRiftBurroughs.mist_tier;return"Undead String Emmental"===i?i:{tier_0:"Mist Level 0",tier_1:"Mist Level 1-5",tier_2:"Mist Level 6-18",tier_3:"Mist Level 19-20"}[u]}if("Fiery Warpath"===r){var l=s.desert_warpath.wave;return"portal"===l?"Portal":"Wave "+l}if("Fort Rox"===r){var c=a.QuestFortRox,d=c.current_phase;return"day"===d?"Day":"dawn"===d?"Dawn":"night"===d?{stage_one:"Twilight",stage_two:"Midnight",stage_three:"Pitch",stage_four:"Utter Darkness",stage_five:"First Light"}[T=c.current_stage]:c.is_lair?"Heart of the Meteor":d}if("Gnawnian Express Station"===r){if(a.QuestTrainStation.on_train){var h=s.tournament.minigame,f=h.name;if("Supply Depot"===f){var _=h.supply_hoarder_turns;if(_>0)return"Supply Depot (Supply Rush)";if(0===_)return"Supply Depot (No Supply Rush)"}else if("Raider River"===f||"Daredevil Canyon"===f)return f}}else{if("Iceberg"===r){var g=a.QuestIceberg.current_phase;return"General"===g?"Generals":"Treacherous Tunnels"!==g&&"The Mad Depths"!==g||"Magnet Base"!==t?"The Mad Depths"===g&&"Hearthstone Base"===t?g+" (Hearthstone)":"Bombing Run"===g&&"Remote Detonator Base"===t?g+" (Remote Detonator)":"Treacherous Tunnels"!==g&&"Bombing Run"!==g&&"The Mad Depths"!==g||"Ultimate Iceberg Base"!==t?g:g+" (Ultimate Iceberg)":g+" (Magnet)"}if("Labyrinth"===r){var m=a.QuestLabyrinth.hallway_name;return e(m,"Short")?m=m.slice(6,m.length):e(m,"Medium")?m=m.slice(7,m.length):e(m,"Long")&&(m=m.slice(5,m.length)),m=m.slice(0,m.indexOf(" Hallway"))}if("Living Garden"===r){if("dumped"===a.QuestLivingGarden.minigame.bucket_state)return"Poured"}else if("Moussu Picchu"===r){var p=a.QuestMoussuPicchu.elements,v=p.storm.level;switch(v){case"high":v="max";break;case"medium":v="high";break;case"low":p.rain.percent>=35&&p.wind.percent>=35&&(v="medium")}if("none"!==v)return"Storm "+v;if("up"===p.rain.direction)return"Rain "+p.rain.level;if("up"===p.wind.direction)return"Wind "+p.wind.level}else if("Twisted Garden"===r){if("dumped"===a.QuestLivingGarden.minigame.vials_state)return"Poured"}else if("Lost City"===r){if(1===a.QuestLostCity.minigame.is_cursed)return"Cursed"}else if("Cursed City"===r){if(a.QuestLostCity.minigame.is_cursed)return"Cursed"}else if("Sand Dunes"===r){if(a.QuestSandDunes.minigame.has_stampede)return"Stampede"}else{if("Seasonal Garden"===r)return{fl:"Fall",wr:"Winter",sg:"Spring",sr:"Summer"}[s.season];if("Sunken City"===r)return"Sunken City"===(g=a.QuestSunkenCity.zone_name)&&(g="Docked"),g;if("Toxic Spill"===r){var y=a.QuestPollutionOutbreak.titles,w={archduke_archduchess:"Archduke/Archduchess",grand_duke:"Grand Duke/Grand Duchess",duke_dutchess:"Duke/Duchess",count_countess:"Count/Countess",baron_baroness:"Baron/Baroness",lord_lady:"Lord/Lady",hero:"Hero",knight:"Knight"};for(var b in y)y.hasOwnProperty(b)&&y[b].active&&(g=w[b]);return g}if("Whisker Woods Rift"===r){var k=a.QuestRiftWhiskerWoods.zones,C="";return C=(C=(C=(C+=k.clearing.status+"/"+k.tree.status+"/"+k.lagoon.status).replace(/low/g,"Low")).replace(/high/g,"Medium")).replace(/boss/g,"High")}if("Zokor"===r){var x=a.QuestAncientCity,S=x.district_name,Q=x.clue_name,O=x.district_tier;return e(S,"Minotaur")?"Lair of the Minotaur":{Tech:["Tech Foundry Outskirts","Tech Research Center","Manaforge"],Scholar:["Neophyte Scholar Study","Master Scholar Auditorium","Dark Library"],Fealty:["Outer Fealty Shrine","Inner Fealty Temple","Templar's Sanctum"],Treasury:["Treasure Room","Treasure Vault"],Farming:["Farming Garden","Overgrown Farmhouse"]}[Q][O-1]}if("Furoma Rift"===r)return a.QuestRiftFuroma.droid.charge_level?"Pagoda":"Training Grounds";var T;if("Bristle Woods Rift"===r)return(T=[]).push(a.QuestRiftBristleWoods.chamber_name),"active"===a.QuestRiftBristleWoods.status_effects.ng&&T.push("(Paladin's Bane)"),"active"===a.QuestRiftBristleWoods.status_effects.st&&T.push("(Pursued)"),T.join(" ");if("Zugzwang's Tower"===r){var R=s.zzt_mage_progress,F=s.zzt_tech_progress;if(R>=F){if(R>=0&&R<8)return"Mystic Pawn Pincher";if(R>=8&&R<10)return"Mystic Knights";if(R>=10&&R<12)return"Mystic Bishops";if(R>=12&&R<14)return"Mystic Rooks";if(14===R)return"Mystic Queen";if(15===R)return"Mystic King";if(R>=16)return"Chess Master"}else{if(F>=0&&F<8)return"Technic Pawn Pincher";if(F>=8&&F<10)return"Technic Knights";if(F>=10&&F<12)return"Technic Bishops";if(F>=12&&F<14)return"Technic Rooks";if(14===F)return"Technic Queen";if(15===F)return"Technic King";if(F>=16)return"Chess Master"}}else if("Claw Shot City"===r){var P=a.QuestClawShotCity.map_active,M=a.QuestClawShotCity.has_wanted_poster;if(!P)return"No Wanted Poster Open";if(P&&!M)return"Crew"}else{if("Mousoleum"===r)return a.QuestMousoleum.has_wall?"Has Wall":"No Wall";if("Queso Geyser"===r){var L=a.QuestQuesoGeyser.state;if("collecting"===L)return"Cork Collecting";if("corked"===L)return"Pressure Building";if("eruption"===L)return a.QuestQuesoGeyser.state_name}else{if("Forbidden Grove"===r)return user.viewing_atts.grove_open?"Open":"Closed";if("Harbour"===r)return"searchStarted"!==a.QuestHarbour.status||a.QuestHarbour.can_claim?"No Bounty":"On Bounty";if("Valour Rift"===r){if("farming"===a.QuestRiftValour.state)return"Outside";if("tower"===a.QuestRiftValour.state){var B=a.QuestRiftValour.floor_type;n.vrFloorType=B>=1&&B<=7?B-1:0;var D=a.QuestRiftValour.floor||1,G=a.QuestRiftValour.is_eclipse_mode?"Umbra ":"";return D%8==0?G+="Eclipse":D<=7?G+="Floors 1-7":D<=15?G+="Floors 9-15":D<=23?G+="Floors 17-23":D>=25&&(G+="Floors 25-31+"),G}}else{if("Floating Islands"===r){var H=a.QuestFloatingIslands.hunting_site_atts,W=H.island_name;if(H.enemy){if((H.enemy.name.indexOf("Warden")>=0||H.enemy.name.indexOf("Paragon")>=0||H.enemy.name.indexOf("Empress")>=0)&&H.is_enemy_encounter){if(H.is_low_tier_island)return"Sky Wardens";if(H.is_high_tier_island)return"Sky Paragons";if(H.is_vault_island)return"Empress"}}else{if("Sky Pirate Swiss Cheese"===i){const e=H.activated_island_mod_types.filter(e=>"sky_pirates"===e).length;return(H.is_vault_island?"Vault ":"Island ")+e===0?"No Pirates":"Pirates x"+e}if(("Cloud Cheesecake"===i||"Extra Rich Cloud Cheesecake"===i)&&H.activated_island_mod_types.filter(e=>"loot_cache"===e).length>=2)W+=` - Loot x${H.activated_island_mod_types.filter(e=>"loot_cache"===e).length}`;else if(H.is_vault_island&&Array.isArray(H.activated_island_mod_types)){const e={};H.activated_island_mod_types.forEach(r=>r in e?e[r]++:e[r]=1);let r=0,t="";for(const[a,n]of Object.entries(e))n>=3&&(r=n,t=H.island_mod_panels.filter(e=>e.type===a)[0].name);r&&t&&(W+=` ${r}x ${t}`)}}return W}if("Table of Contents"===r){var A=a.QuestTableOfContents;if(A.is_writing)return"encyclopedia"===A.progress.type?"Encyclopedia":"Pre-Encyclopedia"}else if("Foreword Farm"===r){var E=a.QuestForewordFarm.mice_state;if("no_plants"===E)return"No Plants";if("one_plant"===E)return"One Plant";if("two_plants"===E)return"Two Plants";if("three_plants"===E)return"Three Plants";if("three_papyrus"===E)return"Three Papyrus";if("boss"===E)return"Boss"}}}}}}}return"N/A"}(t,a);if(function(e,r,t){var a=user.quests;if("Furoma Rift"===e){var n=a.QuestRiftFuroma.droid.charge_level;""!==n&&(r.battery={charge_level_one:1,charge_level_two:2,charge_level_three:3,charge_level_four:4,charge_level_five:5,charge_level_six:6,charge_level_seven:7,charge_level_eight:8,charge_level_nine:9,charge_level_ten:10}[n])}else if("Labyrinth"===e)"active"===a.QuestLabyrinth.lantern_status&&(r.oil="On");else if("Fort Rox"===e){var s=a.QuestFortRox.fort;r.ballistaLevel=s.b.level,r.cannonLevel=s.c.level}else"Zugzwang's Tower"===e?r.amplifier=user.viewing_atts.zzt_amplifier:"Sand Crypts"===e&&(r.saltLevel=a.QuestSandDunes.minigame.salt_charms_used)}(t,n),i&&(e(i,"Empowered")&&(i=i.slice(6,i.length),n.empowered="Yes"),i.indexOf("SUPER|brie+")>=0?i="SB+":i.indexOf(" Cheese")>=0?e(i,"Gauntlet")&&"Gauntlet String Cheese"!==i?o=i=i.slice(16,i.length):i=i.slice(0,i.indexOf(" Cheese")):"Fusion Fondue"===i&&(n.location="M400 Hunting"),n.cheese=i),"N/A"!==o&&(n.phase=o),n.base.indexOf("Denture Base")>-1){var u=document.querySelector(".mousehuntHud-userStat.trap.base > .icon");u&&u.getAttribute("style").indexOf("vteeth")<=0&&(n.base+=" (Toothless)")}"Prestige Base"===n.base&&document.querySelectorAll(".campPage-trap-trapStat-mathRow-name").forEach(e=>{e.textContent.indexOf("(Highest Umbra Floor")>=0&&(n.umbraFloor=+e.textContent.split("(Highest Umbra Floor: ")[1].split(")")[0])}),n.weapon.indexOf("Golem Guardian")>=0&&(n.weapon="Golem Guardian "+user.trap_power_type_name+" Trap"),n.weapon.indexOf("Golem Guardian")>=0?$.post("https://www.mousehuntgame.com/managers/ajax/users/gettrapcomponents.php",{hg_is_ajax:1,uh:user.unique_hash},null,"json").done(function(e){if(e.components){var r=e.components.filter(function(e){return"snow_golem_trap_weapon"===e.component_type}),t=[0,0,0,0,0];for(var a of r)switch(a.power_type){case"Arcane":case"arcn":t[0]=a.golem_guardian_charge_percentage||0;break;case"Forgotten":case"frgttn":t[1]=a.golem_guardian_charge_percentage||0;break;case"Hydro":case"hdr":t[2]=a.golem_guardian_charge_percentage||0;break;case"Physical":case"phscl":t[3]=a.golem_guardian_charge_percentage||0;break;case"Tactical":case"tctcl":t[4]=a.golem_guardian_charge_percentage||0}n.golem_charge=t,l(n)}}):l(n)}else alert("User object not found.");function l(e){var r="https://tsitu.github.io/MH-Tools/setup.html?";for(var t in e){var a=encodeURIComponent(e[t]);"golem_charge"===t&&(a="%5B"+a+"%5D"),r+=t+"="+a+"&"}window.open("","mhsetup").location=r}}();